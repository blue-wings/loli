 <include file="Public:header" />
 <style>
	.boxset_bg{margin-top:30px;margin-left:30px;}
	.boxset_inner{width:500px;height:350px;border:2px solid #ccc;margin-top:5px;font-size:14px;}
	.boxset_text{margin-top:5px;margin-left:5px;}
	.boxset_nei{margin-left:50px;}
	span{line-height:30px;}
	.boxset_select{width:150px;margin-right:10px;}
	.ra_text{font-size:12px;}
	.box_sm{margin-left:120px; margin-top:20px;width:80px;height:30px;}
 </style>
<div class="boxset_bg">	
盒子购买订单发货设置
<div class="boxset_inner">
<form action="__ACTION__" method="POST" name='box_order'  id="box_order" onsubmit="return checkform()">
	<div class="boxset_text">
	<input type="hidden" name="bid" value="{$return.boxid}" />
	<span><input type="radio" name="if_mon" id="if_mon0" value="0" /><label for="if_mon0">即时订购（订购成功后，一般在2个工作日后发货）</label></span><br />
	<span><input type="radio" name="if_mon" id="if_mon1" value="1" /><label for="if_mon1">按月订购</label></span><br />
	<div class="boxset_nei">
		<span>请选择月份数量</span><br />
		<select name="boxset_mon" class="boxset_select">
			<option value="1">1个月</option>
			<option value="3">3个月</option>
			<option value="6">6个月</option>
			<option value="12">12个月</option>
		</select>
		<input type="checkbox" name="if_quarter" id="if_quarter" value="1" /><label for="if_quarter">选择12个月时是否为季度发货</label>
		<br />
		<span>请选择盒子发送属性</span><br />
		<span class="ra_text"><input type="radio" name="boxset_postday" id="boxset_postday15" value="15"><label for="boxset_postday15">系统时间每月15日发货（一般用于贪吃盒）</label></span><br />
		<span  class="ra_text"><input type="radio" name="boxset_postday" id="boxset_postday20" value="20"><label for="boxset_postday20">系统时间每月20日发货（一般用于美妆盒）</label></span><br />
		<span class="ra_text"><input type="radio" name="boxset_postday"  id="boxset_postday1" value="1"><label for="boxset_postday1">自定义发货起送日期</label></span><br />
		<div id="show_time" style="display:none;">
			<span class="ra_text">起送年月</span><br />
			<input type="text" name="start_time" id="start_time" />
		</div>
	</div>
</div>
<input type="submit" name="box_sub" class="box_sm" value="提交表单" />
</form>	
<include file="Public:time_common" />
<script>
$(function(){
	show_one_time('start_time');
	$(":checkbox[name='if_quarter']").click(function(){
		if(document.getElementById("if_quarter").checked==true && $("input[name='if_mon']:checked").val()!=1){
			document.getElementById("if_quarter").checked=false;
			alert("请先选择按月购买类型");
		}
	})
	
	$("input[name='boxset_postday']").click(function(){
		if($("input[name='if_mon']:checked").val()!=1){
			$("input[name='boxset_postday']").prop("checked", false);
			alert("请先选择按月购买类型");
		}else{
			var postday=$("input[name='boxset_postday']:checked").val();
			if(postday==1){
				$("#show_time").show();
			}else{
				$("#show_time").hide();
				$("#start_time").val("");
			}
		}
	})
 	$("input[name='if_mon']").click(function(){
		if($("input[name='if_mon']:checked").val()==0){
			$("input[name='boxset_postday']").prop("checked", false);
			$("input[name='if_quarter']").prop("checked", false);
			$("#show_time").hide();
			$("#start_time").val("");
		}
	})
	
	var bs_mon="{$return.boxset.months}";
	if(bs_mon!=""){
		if(bs_mon==0){
			$("input[name=if_mon][value='0']").attr("checked",true);
		}else{
			$("input[name=if_mon][value='1']").attr("checked",true);
			$("select[name='boxset_mon']").val(bs_mon);
		}
	}
	
	var bs_ifquarter="{$return.boxset.if_quarter}";
	if(bs_ifquarter==1){
		$("input[name='if_quarter']").prop("checked", true);
	}
	
	var bs_postday="{$return.boxset.post_day}";
	if(bs_postday!="" && bs_postday!=0){
		$("input[name=boxset_postday][value='"+bs_postday+"']").attr("checked",true);
	}
	
	var bs_postdate="{$return.boxset.post_date}";
	if(bs_postdate && bs_postdate!="0000-00-00"){
		$("#show_time").show();
		$("#start_time").val(bs_postdate);
		$("input[name=boxset_postday][value='1']").attr("checked",true);
	}
})

function checkform(){
	var select_type=$("input[name='if_mon']:checked").val();
	if(select_type==undefined){
		alert("请先选择订购类型");
		return false;
	}
	if(select_type==1){
		var postday=$("input[name='boxset_postday']:checked").val();
		if(postday==undefined){
			alert("请选择盒子发送属性");
			return false;
		}else if(postday==1){
			var day_info=$.trim($("#start_time").val());
			if(day_info==""){
				alert("您还没有自定义发货起送日期");
				return false;
			}
		}
	}
}
</script>	
</div>
</div>
<include file="Public:footer" />