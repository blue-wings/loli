<include file="Public:header" />
<table width="100%" cellspacing="1" cellpadding="6" border="0" align="center" class="tborder">
<tbody>
<tr>
	<td align="center" class="panelsurround">
	<fieldset class="fieldset">
	<legend>选择增值方案</legend>
	<table cellpadding="0" border="0" align="left">
	<tbody>
	<tr>
	<td>
	<select  name="sselect" size="20">
		<option value="0">--增值列表--</option>
		<volist name="list" id="vo">
			<option value="{$vo.id}">{$vo.projectname}</option>
		</volist>
	</select>	
	</td>
	<td>
	<button  name="adds">加入</button><br>
	<button  name="dels">删除</button><br>
	<button  name="clear">清空</button><br>
	</td>
		<td>

			<select  name="saselect" size="20">
				<option>--已选方案--</option>
				<volist name="selected" id="sd">
					<option value="{$sd.id}">{$sd.projectname}</option>
				</volist>
			</select>
		</td>
		</tr>
				</tbody>
				</table>
			</fieldset>
			
		</div>
	</div>
	</td>
</tr>
</tbody></table>
<script type="text/javascript">
$(":button[name='adds']").bind('click',function(){

	var value = $("select[name='sselect']").val();

	if(value != 0){
		if($("select[name='saselect'] option[value='"+value+"']").length != 0){
			alert('不能重复添加');
		}else{
			send('add',value,$("select[name='sselect']").find("option:selected").text());
		}
	}else{
		alert('不能添加标题!');
	}
})

$(":button[name='dels']").bind('click',function(){
	var val = $("select[name='saselect']").val();

	if( val != null){
		send('delete',val);
	}
})

$(":button[name='clear']").bind('click',function(){
	if($("select[name='saselect'] option").length >1){
		send('clear');
	}
})

function send(action,value,txt){
	var boxid = "{$_GET['boxid']}";

	$.post(
	"__ACTION__",
	{action:action,boxid:boxid,value:value},
	function(data){
		if(action =='add' && data.status == 1){
			$("select[name='saselect']").append("<option value='"+value+"'>"+txt+"</option>");
			$("select[name='saselect']").get(0).selectedIndex=$("select[name='saselect'] option").length-1;

		}else if(action =='delete' && data.status == 1){
			$("select[name='saselect'] option[value='"+value+"']").remove();
		}else if(action =='clear' && data.status == 1){
			$("select[name='saselect'] option:gt(0)").remove();
		}else{
			alert('操作失败!');
		}
	},
	"json"
	);
}
</script>
<include file="Public:footer" />