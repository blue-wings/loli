<include file="public:header_common.inc" />

<style>
<!--
body {background-image:none}
.box {border:#909090 1px solid;background:#fff;color:#333;
   filter:progid:DXImageTransform.Microsoft.Shadow(color=#909090,direction=120,strength=4);
   -moz-box-shadow: 2px 2px 10px #909090;
   -webkit-box-shadow: 2px 2px 10px #909090;
   box-shadow:2px 2px 2px #909090;}
-->
</style>


<div class="subscribe-theirs" style="with:100%;">
	<div style="width:1400px; min-winth:980px; margin: 10px auto;">
		<div class="future-product-first" style="width:100%;">
			<div class="product" style="float:left" style="margin-left:200px">
				<div  style="width:375px; margin-top: 90px;" class="box">
					<dl>
						<dt class="name">
							<a href="javascript:void(0)" onclick="dialog_products('<{$futureProductFirst.pid}>')">
								<img src="<{$futureProductFirst.pimg}>" width="375" height="375" alt="<{$futureProductFirst.pname}>">
							</a>
						</dt>
						<dd class="countDown" countDownSeconds="<{$futureProductFirst.start_time_seconds}>" style="background-color:#FF69B4;height:46px; text-align:center; font-size:22"></dd>
						<dd style="color:grey;height:46px; text-align:center; font-size:20">
							<{$futureProductFirst.pname}>
						</dd>
						
					</dl>
				</div>
			</div>
			<div class="gift" style="position:absolute; top:5px; right:0px; height:640px; width:816px;">
			</div>
		</div>	
		<div class="blank" style="clear:left;height:50px"></div>
		
		<div class="future-product-common" style="float:left; width:1180px; height:653px; border-radius: 0 50px 50px 0; background-color:#fef4f5; ">
			<div class="real-container" style="margin-left:200px">
				<volist name="futureProducts" id="product">
					<div class="product" style="float:left" style="">
						<div  style="width:160px;margin-left:20px" class="box">
							<dl>
								<dt class="name" style="height:46px; text-align:center; font-size:18">
									<{$product.pname}>
								</dt>
								<dd>
									<a href="javascript:void(0)" onclick="dialog_products('<{$product.pid}>')">
										<img src="<{$product.pimg}>" width="160" height="160" alt="<{$product.pname}>">
									</a>
									<notempty name="product.commend_tags_class"> 
										<i class="<{$product.commend_tags_class}>"></i> 
									</notempty>	
								</dd>
								<dd class="countDown" countDownSeconds="<{$product.start_time_seconds}>" style="background-color:#FF69B4;height:30px; text-align:center; font-size:16"></dd>
								<dd style="height:26px">
								</dd>						
							</dl>
						</div>
					</div>
				</volist>
			</div>
		</div>
		<div class="blank" style="clear:left;height:20px"></div>
		
		
		<div class="closed-product-justnow" style="width:980px;  margin: 10px auto;">
			<volist name="closedProducts" id="product">
				<div class="product" style="float:left" style="">
					<div  style="width:375px; margin-top: 90px;" class="box">
						<dl>
							<dt class="name" style="height:46px; text-align:center; font-size:18">
								<{$product.pname}>
							</dt>
							<dd>
								<a href="javascript:void(0)" onclick="dialog_products('<{$product.pid}>')">
									<img src="<{$product.pimg}>" width="160" height="230" alt="<{$product.pname}>">
								</a>
								<notempty name="product.commend_tags_class"> 
									<i class="<{$product.commend_tags_class}>"></i> 
								</notempty>	
							</dd>
							<dd class="closedCountDown" closedTimeInSeconds="<{$end_time_seconds}>" style="background-color:#FF69B4;height:30px; text-align:center; font-size:16"></dd>
							<dd style="height:26px">
							</dd>						
						</dl>
					</div>
			</volist>
		</div>
		
		<div class="year-box" style="margin-top:10px; float:right; width:1180px;height:653px; border-radius:50px 0 0 50px; background-color:f1faff">
			
		</div>
		<div class="blank" style="clear:left;height:20px"></div>
	</div>

</div>

<script >
	var minuteSeconds = 60;
	var hourSeconds = 60 * minuteSeconds;
	var daySeconds = 24*hourSeconds;
	
	function countDown(){
		$(".countDown").each(function(){
			if(!$(this).attr("countDownSeconds")){
				return true;
			}
			var countDownSeconds = parseInt($(this).attr("countDownSeconds"));
			var nowSeconds = Math.floor(new Date().getTime()/1000);
			var seconds = countDownSeconds - nowSeconds;
			if(seconds < 0){
				window.location.reload();
			}
			var minutes = Math.floor(seconds / minuteSeconds);
			var hours = Math.floor(seconds / hourSeconds);
			var days = Math.floor(seconds/ daySeconds);
			
			var dayDisplay = days;
			var hourDisplay = hours % 24;
			var minuteDisplay = minutes % 60;
			var secondDisplay = seconds % 60;
			
			var text;
			if(seconds > daySeconds){
				text = dayDisplay+"天 "+hourDisplay+"小时 "+minuteDisplay+"分钟 "+secondDisplay+"秒 后投递";	
			}else if(countDownSeconds > hourSeconds){
				text = hourDisplay+"小时 "+minuteDisplay+"分钟 "+secondDisplay+"秒 后投递";;
			}else {
				text = "马上投递";
			}
			$(this).text(text);	
		})	
		setTimeout("countDown()", 1000);
	}
	
	countDown();
	
	$(".closedCountDown").each(function(){
		var closedTimeInSeconds = parseInt($(this).attr("closedTimeInSeconds"));
		var nowSeconds = new Date().getTime()/1000;
		var text;
		if((nowSeconds -closedTimeInSeconds) > hourSeconds){
			var date = new Date(closedTimeInSeconds*1000);
			text = date.getFullYear()+"年 "+date.getMonth()+"月 "+date.getDate()+"日 结束投递";
			
		}else{
			text = "刚刚结束投递"
		}
		$(this).text(text);
	})
	
	
	
	
</script>

